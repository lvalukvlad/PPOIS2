# Отчёт (Вариант 11)

## Описание варианта задания

Таблица данных:

| Название турнира       | Дата проведения | Название вида спорта | ФИО победителя   | Размер призовых турнира | Заработок победителя |
|-----------------------|----------------|---------------------|-----------------|------------------------|---------------------|
|                       |                |                     |                 |                        | (60% от размера призовых, вычисляется автоматически) |

Условия поиска и удаления:

- По названию турнира или дате проведения.
- По виду спорта или ФИО победителя (может быть заполнен только один элемент ФИО, например, имя).
- По размеру призовых турнира или заработку победителя (задаётся верхний и нижний предел).

Замечание: Список видов спорта в диалоге поиска формируется автоматически на основе данных из файла и отображается в выпадающем списке.

---

## Структура XML-файла

### Корневой элемент (<tournaments>)

Содержит список всех турниров. Каждый турнир представлен элементом <tournament>.

### Элемент турнира (<tournament>)

Содержит информацию о конкретном турнире. Включает следующие дочерние элементы:

- \<name>\: Название турнира (строка).
- \<date>\: Дата проведения (формат YYYY-MM-DD).
- <sport_type>: Название вида спорта (строка).
- <winner_name>: ФИО победителя (строка).
- <prize_amount>: Размер призовых турнира (число с плавающей точкой).
- <winner_earnings>: Заработок победителя (число с плавающей точкой, вычисляется как 60% от <prize_amount>).

---

## Сценарии и структура ПО

### Общее описание интерфейса

Приложение построено с использованием библиотеки Flet на Python. Оно состоит из главного окна и трёх диалоговых окон (создание, поиск, удаление). Главное окно содержит список турниров, меню и панель инструментов. Диалоги вызываются через соответствующие пункты меню или кнопки на панели.

### Header

- Общий вид: В верхней части окна расположена панель навигации (AppBar) с заголовком "Турниры" и выпадающим меню, содержащим пункты: "Создать", "Поиск", "Удалить".
- Панель инструментов: Под AppBar находится строка с тремя кнопками: "Создать", "Поиск", "Удалить", которые дублируют функционал меню.
- Добавление файла: При запуске приложение автоматически загружает файл tournaments1.xml. Пользователь может выбрать другой файл через стандартный диалог (кнопка "Открыть файл" в панели инструментов).

### Главное меню

- При отсутствии файла: Если файл не загружен, отображается сообщение: "Файл не выбран. Пожалуйста, откройте XML-файл".
- С файлом: Если файл загружен, отображается:
  - Список турниров: Таблица с колонками: Название, Дата, Вид спорта, Победитель, Призы, Заработок. Каждая запись оформлена в виде карточки с белым фоном, тенями и закруглёнными углами.
  - Информация о списке: Над таблицей отображается текст: "Всего турниров: N, Турниров на странице: M".
  - Пагинация: Под таблицей — элементы управления: кнопки "Первая", "Предыдущая", "Следующая", "Последняя", поля для ввода текущей страницы и количества записей на странице, а также текст: "Страница X из Y".

### Меню поиска

- Общий вид: Диалог с заголовком "Поиск турниров", формой для ввода условий, кнопкой "Найти" и списком результатов.
- Форма для поиска: Содержит поля:
  - Текстовое поле для названия турнира.
  - Календарь (DatePicker) для выбора даты.
  - Выпадающий список для выбора вида спорта (заполняется автоматически).
  - Текстовое поле для ФИО победителя.
  - Два поля для диапазона призовых (мин. и макс.).
- Список результатов: Аналогичен главному списку (таблица с пагинацией). Над списком отображается: "Найдено: N записей".
- Пагинация: Те же элементы управления, что в главном окне.

### Меню удаления

- Общий вид: Диалог с заголовком "Удаление турниров", формой для условий, кнопкой "Удалить" и текстом результата.
- Форма для удаления: Те же поля, что в меню поиска.
- Кнопка для удаления: Кнопка "Удалить" (красного цвета с текстом белого цвета).
- Результат: После удаления отображается текст: "Удалено N записей". Список турниров в главном окне обновляется автоматически.

### Меню создания

- Общий вид: Диалог с заголовком "Создание турнира", формой ввода, кнопками "Сохранить" и "Закрыть".
- Форма для создания: Содержит поля:
  - Текстовое поле для названия турнира.
  - Календарь (DatePicker) для выбора даты.
  - Текстовое поле для вида спорта.
  - Текстовое поле для ФИО победителя.
  - Числовое поле для размера призовых (заработок вычисляется автоматически).
- Кнопка для создания: Кнопка "Сохранить" (синего цвета с белым текстом). После создания турнир добавляется в список, диалог закрывается.

---

## Классы

### TournamentManager

Класс, управляющий массивом турниров.

- Атрибуты:
  - file_path: Путь к XML-файлу.
  - tournaments: Список турниров (экземпляров класса Tournament).
- Методы:
  - load_tournaments(): Загружает данные из XML (SAX).
  - save_tournaments(): Сохраняет данные в XML (DOM).
  - add_tournament(): Добавляет турнир в массив.
  - find_tournaments(): Поиск по условиям.
  - delete_tournaments(): Удаление по условиям.

### Tournament

Класс, описывающий турнир.

- Атрибуты:
  - name: Название турнира (строка).
  - date: Дата проведения (datetime.date).
  - sport_type: Вид спорта (строка).
  - winner_name: ФИО победителя (строка).
  - prize_amount: Размер призовых (float).
  - winner_earnings: Заработок победителя (float, 60% от prize_amount).
- Методы:
  - Геттеры и сеттеры для всех атрибутов.

### CreatedTournament

Класс для создаваемого турнира.

- Атрибуты:
  - Те же, что у Tournament.
- Методы:
  - get_tournament(): Возвращает объект Tournament.
  - clear(): Сбрасывает все поля.
  - Геттеры и сеттеры.

### TournamentPage

Класс для управления пагинацией.

- Атрибуты:
  - page: Текущая страница.
  - items_per_page: Количество записей на странице.
- Методы:
  - next_page(), prev_page(), first_page(), last_page(): Переключение страниц.
  - Геттеры и сеттеры.

### Controller

Класс, реализующий логику MVC.

- Атрибуты:
  - manager: Экземпляр TournamentManager.
  - page: Страница Flet.
- Методы:
  - get_tournament_list(): Формирует список турниров.
  - add_tournament(): Добавляет турнир через manager.
  - find_tournaments(): Выполняет поиск через manager.
  - delete_tournaments(): Выполняет удаление через manager.

---

## Сценарии демонстрации

1. Запуск программы:  
   - Запустите main.py. Откроется главное окно с заголовком "Турниры".
   - Загрузите файл tournaments1.xml (с 50+ записями). Список турниров отобразится в таблице с пагинацией.

2. Создание турнира:  
   - Нажмите "Создать" в меню или на панели. Откроется диалог.
   - Введите данные (например, "Лига Чемпионов 2025", дата: 2025-05-31, вид спорта: "Футбол", победитель: "Килиан Мбаппе", призы: 15000000).
   - Нажмите "Сохранить". Турнир добавится в список, файл обновится.

3. Поиск турниров:  
   - Нажмите "Поиск". Откроется диалог.
   - Укажите условия (например, вид спорта: "Футбол", призы от 1000000 до 20000000).
   - Нажмите "Найти". Отобразится список подходящих турниров.

4. Удаление турниров:  
   - Нажмите "Удалить". Откроется диалог.
   - Укажите условия (например, название: "Лига Чемпионов 2025").
   - Нажмите "Удалить". Отобразится сообщение о количестве удалённых записей. Список в главном окне обновится.

5. Переключение страниц:  
   - В главном окне или диалоге поиска используйте пагинацию для перехода между страницами (10 записей на страницу).

6. Сохранение и загрузка:  
   - Изменения автоматически сохраняются в tournaments1.xml.
   - Загрузите tournaments2.xml для работы с другим набором данных.

---

## Заключение

Программа полностью соответствует требованиям задания: реализовано главное окно с меню и панелью инструментов, диалоги для создания, поиска и удаления, постраничный вывод, работа с XML (DOM/SAX), корректные типы данных (дата через DatePicker, числа — float). Дизайн интерфейса включает карточки, тени и современный стиль оформления. Для демонстрации подготовлены пять файлов с 50+ уникальными записями.
